System.register(["./@vue-legacy-kX9XdwJt.js","./tdesign-icons-vue-next-legacy-CTQOxWOG.js","./vue-router-legacy-RmeyvTNz.js","./mitt-legacy-DzTFYSQf.js","./tdesign-vue-next-legacy-3OV41474.js","./qrcode-legacy-BCBiPVPO.js","./@popperjs-legacy-DZ_-87xi.js","./dijkstrajs-legacy-Nu3aLTVb.js"],(function(e,t){"use strict";var a,l,o,n,i,s,r,d,u,c,m,f,g,p,v,h,b,y,w,x,k,_,V,S,C,U,L,P,Q,M,j,T,I,F,E,W,z,O,q,A,B,N,R,H,$,G,D,J,K,X,Y,Z,ee,te,ae,le,oe,ne,ie,se,re,de,ue,ce,me,fe,ge,pe,ve,he,be,ye,we,xe,ke,_e,Ve,Se,Ce,Ue,Le,Pe;return{setters:[e=>{a=e.d,l=e.r,o=e.o,n=e.j,i=e.G,s=e.H,r=e.a,d=e.I,u=e.J,c=e.F,m=e.K,f=e.L,g=e.D,p=e.k,v=e.w,h=e.M,b=e.N,y=e.O,w=e.P,x=e.Q,k=e.R,_=e.S,V=e.u,S=e.v,C=e.f,U=e.e},e=>{L=e.s,P=e.m,Q=e.c,M=e.a,j=e.e,T=e._,I=e.b,F=e.d,E=e.f,W=e.g,z=e.l},e=>{O=e.u,q=e.c,A=e.a},e=>{B=e.m},e=>{N=e.M,R=e.B,H=e.I,$=e.F,G=e.a,D=e.S,J=e.O,K=e.b,X=e.c,Y=e.d,Z=e.e,ee=e.C,te=e.R,ae=e.f,le=e.D,oe=e.L,ne=e.g,ie=e.A,se=e.T,re=e.h,de=e.i,ue=e.j,ce=e.k,me=e.l,fe=e.m,ge=e.n,pe=e.o,ve=e.p,he=e.P,be=e.q,ye=e.r,we=e.s,xe=e.t,ke=e.u,_e=e.v,Ve=e.w,Se=e.x,Ce=e.y,Ue=e.z,Le=e.E},e=>{Pe=e.b},null,null],execute:function(){var e=document.createElement("style");e.textContent=".sidebar-menu[data-v-d8eda7fa]{position:fixed;top:0;left:0;height:100%;width:200px;box-shadow:0 4px 8px rgba(0,0,0,.1)}@media (max-width: 768px){.sidebar-menu[data-v-d8eda7fa]{width:100px}}.logo[data-v-d8eda7fa]{display:flex;width:auto;height:100%}.logo-img[data-v-d8eda7fa]{object-fit:contain;margin-top:8px;margin-bottom:8px}.logo-textBox[data-v-d8eda7fa]{display:flex;align-items:center;margin-left:10px}.logo-text[data-v-d8eda7fa]{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:22px;font-family:Sotheby,Helvetica,monospace}.menu-item[data-v-d8eda7fa]{margin-bottom:10px}.dashboard-container[data-v-3c6e02fe]{display:flex;flex-direction:row;height:100vh;width:100%}.sidebar-menu[data-v-3c6e02fe]{position:relative;z-index:2}@media (max-width: 768px){.content[data-v-3c6e02fe]{padding:10px}}.about-us[data-v-a83fde1a]{padding:20px;text-align:left}.list[data-v-a83fde1a]{display:flex;flex-direction:column}.list-item[data-v-a83fde1a]{display:flex;justify-content:space-between;align-items:center}.item-label[data-v-a83fde1a]{flex:1;font-weight:700}.item-content[data-v-a83fde1a]{flex:2;display:flex;flex-wrap:wrap;justify-content:flex-end}.tag-item[data-v-a83fde1a]{margin-right:10px;margin-bottom:10px}.title[data-v-3aaf6eea]{padding:20px 20px 0;display:flex;justify-content:space-between}.setting[data-v-3aaf6eea]{margin:0 20px}.setting-box[data-v-3aaf6eea]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:20px;overflow-y:auto}.setting-card[data-v-3aaf6eea]{width:100%;text-align:left}.setting-content[data-v-3aaf6eea]{width:100%}.card-address svg[data-v-3aaf6eea]{fill:var(--td-brand-color);cursor:pointer}.local-box[data-v-3aaf6eea]{display:flex;margin-top:2px}.local-icon[data-v-3aaf6eea]{flex:1}.local[data-v-3aaf6eea]{flex:6;margin:0 10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.copy-icon[data-v-3aaf6eea]{flex:1;cursor:pointer;flex-direction:row}.token-view[data-v-3aaf6eea]{display:flex;align-items:center}.token-view span[data-v-3aaf6eea]{flex:5;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.browse-icon[data-v-3aaf6eea]{flex:2}.t-dialog__ctx .t-dialog--defaul{margin:0 20px}@media (max-width: 1024px){.setting-box[data-v-3aaf6eea]{grid-template-columns:1fr 1fr}}@media (max-width: 786px){.setting-box[data-v-3aaf6eea]{grid-template-columns:1fr}}.card-box[data-v-3aaf6eea]{margin:10px 20px 0}.card-none[data-v-3aaf6eea]{line-height:400px!important}.dialog-body[data-v-3aaf6eea]{max-height:60vh;overflow-y:auto}[data-v-3aaf6eea]::-webkit-scrollbar{width:0;background:transparent}.setting-card .t-card__title{text-align:left!important}.setting-card .t-card__description{margin-bottom:0;font-size:12px}.card-address .t-card__body{display:flex;flex-direction:row;align-items:center}.setting-base-info .t-descriptions__header{font-size:15px;margin-bottom:0}.setting-base-info .t-descriptions__label{padding:0 var(--td-comp-paddingLR-l)!important}.setting-base-info tr>td:last-child{text-align:right}.info-coll .t-collapse-panel__wrapper .t-collapse-panel__content{padding:var(--td-comp-paddingTB-m) var(--td-comp-paddingLR-l)}.layout[data-v-edab2663]{height:100vh}.login-container[data-v-edab2663]{padding:20px;border-radius:5px;max-width:400px;min-width:300px;position:relative;margin:50px auto}@media (max-width: 600px){.login-container[data-v-edab2663]{width:90%;min-width:unset}}.login-methods[data-v-edab2663]{display:flex;justify-content:space-between;margin-bottom:20px}.login-method[data-v-edab2663]{padding:10px 15px;font-size:16px;cursor:pointer;transition:all .3s}.login-method.active[data-v-edab2663]{background-color:#e6f0ff;color:#007bff}.login-form[data-v-edab2663],.qrcode[data-v-edab2663]{display:flex;flex-direction:column;gap:15px}.qrcode[data-v-edab2663]{display:flex;justify-content:center;align-items:center;gap:15px;text-align:center}.sotheby-font[data-v-edab2663]{font-family:Sotheby,Helvetica,monospace;font-size:3.125rem;line-height:1.2;text-shadow:0 1px 2px rgba(0,0,0,.1)}.footer[data-v-edab2663]{text-align:center;margin:0;font-size:.875rem;color:#888;position:fixed;bottom:20px;left:0;right:0}:root{font-family:Inter,system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;color-scheme:light dark;color:rgba(255,255,255,.87);background-color:#242424;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}a{font-weight:500;color:#646cff;text-decoration:inherit}a:hover{color:#535bf2}body{margin:0;display:flex;place-items:center;min-width:320px;min-height:100vh}h1{font-size:3.2em;line-height:1.1}button{border-radius:8px;border:1px solid transparent;padding:.6em 1.2em;font-size:1em;font-weight:500;font-family:inherit;background-color:#1a1a1a;cursor:pointer;transition:border-color .25s}button:hover{border-color:#646cff}button:focus,button:focus-visible{outline:4px auto -webkit-focus-ring-color}.card{padding:2em}#app{height:100%;width:100%;margin:0;text-align:center}@media (prefers-color-scheme: light){:root{color:#213547;background-color:#fff}a:hover{color:#747bff}button{background-color:#f9f9f9}}@font-face{font-family:Sotheby;src:url("+new URL("../ttf/Sotheby-Bahhmb2a.ttf",t.meta.url).href+') format("truetype");font-weight:400;font-style:normal}.layout[data-v-ae44d02f]{height:100vh}.login-container[data-v-ae44d02f]{padding:20px;border-radius:5px;max-width:400px;min-width:300px;position:relative;margin:50px auto}@media (max-width: 600px){.login-container[data-v-ae44d02f]{width:90%;min-width:unset}}.tdesign-demo-block-column[data-v-ae44d02f]{display:flex;flex-direction:column;row-gap:16px}.tdesign-demo-block-column-large[data-v-ae44d02f]{display:flex;flex-direction:column;row-gap:32px}.tdesign-demo-block-row[data-v-ae44d02f]{display:flex;column-gap:16px;align-items:center}.sotheby-font[data-v-ae44d02f]{font-family:Sotheby,Helvetica,monospace;font-size:3.125rem;line-height:1.2;text-shadow:0 1px 2px rgba(0,0,0,.1)}.footer[data-v-ae44d02f]{text-align:center;margin:0;font-size:.875rem;color:#888;position:fixed;bottom:20px;left:0;right:0}.title[data-v-4c7ed5f7]{padding:20px 20px 0}.card[data-v-4c7ed5f7]{margin:0 20px;padding-top:20px;padding-bottom:20px}.other-config-container[data-v-4c7ed5f7]{display:flex;justify-content:center;align-items:flex-start;box-sizing:border-box}.other-config[data-v-4c7ed5f7]{width:100%;max-width:500px;border-radius:8px}.form-item[data-v-4c7ed5f7]{margin-bottom:20px;text-align:left}.button-container[data-v-4c7ed5f7]{display:flex;justify-content:center;margin-top:20px}\n/*$vite$:1*/',document.head.appendChild(e);const Qe={id:"app","theme-mode":"dark"},Me={key:0},je=a({__name:"App",setup(e){const t=window.matchMedia("(max-width: 768px)"),a={"浅色":"light","深色":"dark","自动":"auto"},v=l(!0),h=(()=>{let e=null;return t=>{const a=document.documentElement;if("dark"===t)a.setAttribute("theme-mode","dark");else if("light"===t)a.removeAttribute("theme-mode");else if("auto"===t){e=window.matchMedia("(prefers-color-scheme: dark)");const t=e=>{e.matches?a.setAttribute("theme-mode","dark"):a.removeAttribute("theme-mode")};e.addEventListener("change",t);const l=new Event("change");Object.defineProperty(l,"matches",{value:e.matches,writable:!1}),e.dispatchEvent(l),p((()=>{e&&e.removeEventListener("change",t)}))}}})(),b=()=>{const e=localStorage.getItem("theme");h(null===e?"auto":e)},y=e=>{const t=a[e.item.label];console.log(t),h(t),localStorage.setItem("theme",t)},w=()=>{v.value=!t.matches,t.matches&&localStorage.setItem("theme","auto")};return o((()=>{b(),w(),window.addEventListener("resize",w)})),n((()=>{window.removeEventListener("resize",w)})),(e,t)=>{const a=m("router-view"),l=m("t-sticky-item"),o=m("t-sticky-tool");return f(),i(c,null,[s("div",Qe,[r(a)]),v.value?(f(),i("div",Me,[r(o,{shape:"round",placement:"right-bottom",offset:[-50,10],onClick:y},{default:d((()=>[r(l,{label:"浅色",popup:"切换浅色模式"},{icon:d((()=>[r(g(L))])),_:1}),r(l,{label:"深色",popup:"切换深色模式"},{icon:d((()=>[r(g(P))])),_:1}),r(l,{label:"自动",popup:"跟随系统"},{icon:d((()=>[r(g(Q))])),_:1})])),_:1})])):u("",!0)],64)}}}),Te=""+new URL("../png/logo_webui-CBEsc38e.png",t.meta.url).href,Ie=B(),Fe={class:"logo"},Ee=["width"],We={class:"logo-textBox"},ze={class:"logo-text"},Oe=(e,t)=>{const a=e.__vccOpts||e;for(const[l,o]of t)a[l]=o;return a},qe=Oe(a({__name:"Nav",props:{menuItems:{}},setup(e){const t=l("true"===localStorage.getItem("sidebar-collapsed")),a=l(t.value?"menu-unfold":"menu-fold"),n=l(!1),u=()=>{t.value=!t.value,a.value=t.value?"menu-unfold":"menu-fold",localStorage.setItem("sidebar-collapsed",t.value.toString())};return v(t,((e,a)=>{setTimeout((()=>{Ie.emit("sendMenu",t.value)}),300)})),o((()=>{const e=window.matchMedia("(max-width: 800px)"),a=e=>{n.value=e.matches,e.matches&&(t.value=e.matches)};e.addEventListener("change",a);const l=new Event("change");return Object.defineProperty(l,"matches",{value:e.matches,writable:!1}),e.dispatchEvent(l),()=>{e.removeEventListener("change",a)}})),(e,l)=>{const o=m("t-icon"),g=m("t-menu-item"),p=m("t-tooltip"),v=m("router-link"),x=m("t-button"),k=m("t-menu");return f(),h(k,{theme:"light","default-value":"2-1",collapsed:t.value,class:"sidebar-menu"},{logo:d((()=>[s("div",Fe,[s("img",{class:"logo-img",width:t.value?35:"auto",src:Te,alt:"logo"},null,8,Ee),s("div",We,[s("div",ze,b(t.value?"":"NapCat"),1)])])])),operations:d((()=>[r(x,{disabled:n.value,class:"t-demo-collapse-btn",variant:"text",shape:"square",onClick:u},{icon:d((()=>[r(o,{name:a.value},null,8,["name"])])),_:1},8,["disabled"])])),default:d((()=>[(f(!0),i(c,null,y(e.menuItems,(e=>(f(),h(v,{key:e.value,to:e.route},{default:d((()=>[r(p,{disabled:!t.value,content:e.label,placement:"right"},{default:d((()=>[r(g,{value:e.value,disabled:e.disabled,class:"menu-item"},{icon:d((()=>[r(o,{name:e.icon},null,8,["name"])])),default:d((()=>[w(" "+b(e.label),1)])),_:2},1032,["value","disabled"])])),_:2},1032,["disabled","content"])])),_:2},1032,["to"])))),128))])),_:1},8,["collapsed"])}}}),[["__scopeId","data-v-d8eda7fa"]]),Ae=Oe(a({__name:"Dashboard",setup(e){const t=l([{value:"item1",icon:"dashboard",label:"基础信息",route:"/dashboard/basic-info"},{value:"item3",icon:"wifi-1",label:"网络配置",route:"/dashboard/network-config"},{value:"item4",icon:"setting",label:"其余配置",route:"/dashboard/other-config"},{value:"item5",icon:"system-log",label:"日志查看",route:"/dashboard/log-view"},{value:"item6",icon:"info-circle",label:"关于我们",route:"/dashboard/about-us"}]),a=l(null);return Ie.on("sendMenu",(e=>{Ie.emit("sendWidth",a.value?.offsetWidth),localStorage.setItem("menuWidth",a.value?.offsetWidth?.toString()||"0")})),o((()=>{localStorage.setItem("menuWidth",a.value?.offsetWidth?.toString()||"0")})),(e,l)=>{const o=m("router-view"),n=m("t-layout");return f(),h(n,{class:"dashboard-container"},{default:d((()=>[s("div",{ref_key:"menuRef",ref:a},[r(qe,{"menu-items":t.value,class:"sidebar-menu"},null,8,["menu-items"])],512),r(n,null,{default:d((()=>[r(o)])),_:1})])),_:1})}}}),[["__scopeId","data-v-3c6e02fe"]]),Be={class:"basic-info"},Ne=Oe({},[["render",function(e,t){return f(),i("div",Be,t[0]||(t[0]=[s("h1",null,"面板基础信息",-1),s("p",null,"这里显示面板的基础信息。",-1)]))}]]),Re={name:"napcat.webui",private:!0,version:"1.0.0",type:"module",scripts:{"webui:lint":"eslint --fix src/**/*.{js,ts,vue}","webui:dev":"vite","webui:build":"vite build","webui:preview":"vite preview"},dependencies:{"eslint-plugin-prettier":"^5.2.1",qrcode:"^1.5.4","tdesign-icons-vue-next":"^0.3.3","tdesign-vue-next":"^1.10.3",vue:"^3.5.13","vue-router":"^4.4.5"},devDependencies:{"@eslint/eslintrc":"^3.1.0","@eslint/js":"^9.14.0","@types/qrcode":"^1.5.5","@vitejs/plugin-legacy":"^5.4.3","@vitejs/plugin-vue":"^5.1.4","eslint-config-prettier":"^9.1.0","eslint-plugin-vue":"^9.31.0",globals:"^15.12.0",terser:"^5.36.0",typescript:"~5.6.2",vite:"^5.4.10","vue-tsc":"^2.1.8"}},He={class:"about-us"},$e={class:"item-content"},Ge={class:"item-content"},De=Oe(a({__name:"AboutUs",setup:e=>(e,t)=>{const a=m("t-divider"),l=m("t-alert"),o=m("t-link"),n=m("t-list-item"),u=m("t-tag"),c=m("t-list");return f(),i("div",He,[s("div",null,[r(a,{content:"面板关于信息",align:"left"}),r(l,{theme:"success",message:"NapCat.WebUi is running"}),r(c,{class:"list"},{default:d((()=>[r(n,{class:"list-item"},{default:d((()=>[t[1]||(t[1]=s("span",{class:"item-label"},"开发人员:",-1)),s("span",$e,[r(o,{href:"mailto:nanaeonn@outlook.com"},{default:d((()=>t[0]||(t[0]=[w("Mlikiowa")]))),_:1})])])),_:1}),r(n,{class:"list-item"},{default:d((()=>[t[2]||(t[2]=s("span",{class:"item-label"},"版本信息:",-1)),s("span",Ge,[r(u,{class:"tag-item",theme:"success"},{default:d((()=>[w(" WebUi: "+b(g(Re).version),1)])),_:1}),r(u,{class:"tag-item",theme:"success"},{default:d((()=>[w(" NapCat: "+b(g("4.2.4")),1)])),_:1}),r(u,{class:"tag-item",theme:"success"},{default:d((()=>[w(" TDesign: "+b(g(Re).dependencies["tdesign-vue-next"]),1)])),_:1})])])),_:1})])),_:1})])])}}),[["__scopeId","data-v-a83fde1a"]]),Je={class:"log-view"},Ke=Oe({},[["render",function(e,t){return f(),i("div",Je,t[0]||(t[0]=[s("h1",null,"面板日志信息",-1),s("p",null,"这里显示面板的日志信息。",-1)]))}]]);function Xe(e,t){return{...e,...t}}const Ye={network:{httpServers:[],httpClients:[],websocketServers:[],websocketClients:[]},musicSignUrl:"",enableLocalFile2Url:!1,parseMultMsg:!0},Ze={httpServers:{name:"http-server",enable:!1,port:3e3,host:"0.0.0.0",enableCors:!0,enableWebsocket:!0,messagePostFormat:"array",token:"",debug:!1},httpClients:{name:"http-client",enable:!1,url:"http://localhost:8080",messagePostFormat:"array",reportSelfMessage:!1,token:"",debug:!1},websocketServers:{name:"websocket-server",enable:!1,host:"0.0.0.0",port:3001,messagePostFormat:"array",reportSelfMessage:!1,token:"",enableForcePushEvent:!0,debug:!1,heartInterval:3e4},websocketClients:{name:"websocket-client",enable:!1,url:"ws://localhost:8082",messagePostFormat:"array",reportSelfMessage:!1,reconnectInterval:5e3,token:"",debug:!1,heartInterval:3e4}},et=a({__name:"HttpServerComponent",props:{config:{}},setup(e){const t=e,a=l([{label:"Array",value:"array"},{label:"String",value:"string"}]);return v((()=>t.config.messagePostFormat),(e=>{"array"!==e&&"string"!==e&&(t.config.messagePostFormat="array")})),(e,t)=>{const l=m("t-checkbox"),o=m("t-form-item"),n=m("t-input"),s=m("t-select"),u=m("t-form");return f(),i("div",null,[r(u,{labelAlign:"left"},{default:d((()=>[r(o,{label:"启用"},{default:d((()=>[r(l,{modelValue:e.config.enable,"onUpdate:modelValue":t[0]||(t[0]=t=>e.config.enable=t)},null,8,["modelValue"])])),_:1}),r(o,{label:"端口"},{default:d((()=>[r(n,{modelValue:e.config.port,"onUpdate:modelValue":t[1]||(t[1]=t=>e.config.port=t),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])])),_:1}),r(o,{label:"主机"},{default:d((()=>[r(n,{modelValue:e.config.host,"onUpdate:modelValue":t[2]||(t[2]=t=>e.config.host=t),type:"text"},null,8,["modelValue"])])),_:1}),r(o,{label:"启用 CORS"},{default:d((()=>[r(l,{modelValue:e.config.enableCors,"onUpdate:modelValue":t[3]||(t[3]=t=>e.config.enableCors=t)},null,8,["modelValue"])])),_:1}),r(o,{label:"启用 WS"},{default:d((()=>[r(l,{modelValue:e.config.enableWebsocket,"onUpdate:modelValue":t[4]||(t[4]=t=>e.config.enableWebsocket=t)},null,8,["modelValue"])])),_:1}),r(o,{label:"消息格式"},{default:d((()=>[r(s,{modelValue:e.config.messagePostFormat,"onUpdate:modelValue":t[5]||(t[5]=t=>e.config.messagePostFormat=t),options:a.value},null,8,["modelValue","options"])])),_:1}),r(o,{label:"Token"},{default:d((()=>[r(n,{modelValue:e.config.token,"onUpdate:modelValue":t[6]||(t[6]=t=>e.config.token=t),type:"text"},null,8,["modelValue"])])),_:1}),r(o,{label:"调试模式"},{default:d((()=>[r(l,{modelValue:e.config.debug,"onUpdate:modelValue":t[7]||(t[7]=t=>e.config.debug=t)},null,8,["modelValue"])])),_:1})])),_:1})])}}}),tt=a({__name:"HttpClientComponent",props:{config:{}},setup(e){const t=e,a=l([{label:"Array",value:"array"},{label:"String",value:"string"}]);return v((()=>t.config.messagePostFormat),(e=>{"array"!==e&&"string"!==e&&(t.config.messagePostFormat="array")})),(e,t)=>{const l=m("t-checkbox"),o=m("t-form-item"),n=m("t-input"),s=m("t-select"),u=m("t-form");return f(),i("div",null,[r(u,{labelAlign:"left"},{default:d((()=>[r(o,{label:"启用"},{default:d((()=>[r(l,{modelValue:e.config.enable,"onUpdate:modelValue":t[0]||(t[0]=t=>e.config.enable=t)},null,8,["modelValue"])])),_:1}),r(o,{label:"URL"},{default:d((()=>[r(n,{modelValue:e.config.url,"onUpdate:modelValue":t[1]||(t[1]=t=>e.config.url=t)},null,8,["modelValue"])])),_:1}),r(o,{label:"消息格式"},{default:d((()=>[r(s,{modelValue:e.config.messagePostFormat,"onUpdate:modelValue":t[2]||(t[2]=t=>e.config.messagePostFormat=t),options:a.value},null,8,["modelValue","options"])])),_:1}),r(o,{label:"报告自身消息"},{default:d((()=>[r(l,{modelValue:e.config.reportSelfMessage,"onUpdate:modelValue":t[3]||(t[3]=t=>e.config.reportSelfMessage=t)},null,8,["modelValue"])])),_:1}),r(o,{label:"Token"},{default:d((()=>[r(n,{modelValue:e.config.token,"onUpdate:modelValue":t[4]||(t[4]=t=>e.config.token=t)},null,8,["modelValue"])])),_:1}),r(o,{label:"调试模式"},{default:d((()=>[r(l,{modelValue:e.config.debug,"onUpdate:modelValue":t[5]||(t[5]=t=>e.config.debug=t)},null,8,["modelValue"])])),_:1})])),_:1})])}}}),at=a({__name:"WebsocketServerComponent",props:{config:{}},setup(e){const t=e,a=l([{label:"Array",value:"array"},{label:"String",value:"string"}]);return v((()=>t.config.messagePostFormat),(e=>{"array"!==e&&"string"!==e&&(t.config.messagePostFormat="array")})),(e,t)=>{const l=m("t-checkbox"),o=m("t-form-item"),n=m("t-input"),s=m("t-select"),u=m("t-form");return f(),i("div",null,[r(u,{labelAlign:"left"},{default:d((()=>[r(o,{label:"启用"},{default:d((()=>[r(l,{modelValue:e.config.enable,"onUpdate:modelValue":t[0]||(t[0]=t=>e.config.enable=t)},null,8,["modelValue"])])),_:1}),r(o,{label:"主机"},{default:d((()=>[r(n,{modelValue:e.config.host,"onUpdate:modelValue":t[1]||(t[1]=t=>e.config.host=t)},null,8,["modelValue"])])),_:1}),r(o,{label:"端口"},{default:d((()=>[r(n,{modelValue:e.config.port,"onUpdate:modelValue":t[2]||(t[2]=t=>e.config.port=t),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])])),_:1}),r(o,{label:"消息格式"},{default:d((()=>[r(s,{modelValue:e.config.messagePostFormat,"onUpdate:modelValue":t[3]||(t[3]=t=>e.config.messagePostFormat=t),options:a.value},null,8,["modelValue","options"])])),_:1}),r(o,{label:"上报自身消息"},{default:d((()=>[r(l,{modelValue:e.config.reportSelfMessage,"onUpdate:modelValue":t[4]||(t[4]=t=>e.config.reportSelfMessage=t)},null,8,["modelValue"])])),_:1}),r(o,{label:"Token"},{default:d((()=>[r(n,{modelValue:e.config.token,"onUpdate:modelValue":t[5]||(t[5]=t=>e.config.token=t)},null,8,["modelValue"])])),_:1}),r(o,{label:"强制推送事件"},{default:d((()=>[r(l,{modelValue:e.config.enableForcePushEvent,"onUpdate:modelValue":t[6]||(t[6]=t=>e.config.enableForcePushEvent=t)},null,8,["modelValue"])])),_:1}),r(o,{label:"调试模式"},{default:d((()=>[r(l,{modelValue:e.config.debug,"onUpdate:modelValue":t[7]||(t[7]=t=>e.config.debug=t)},null,8,["modelValue"])])),_:1}),r(o,{label:"心跳间隔"},{default:d((()=>[r(n,{modelValue:e.config.heartInterval,"onUpdate:modelValue":t[8]||(t[8]=t=>e.config.heartInterval=t),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])])),_:1})])),_:1})])}}}),lt=a({__name:"WebsocketClientComponent",props:{config:{}},setup(e){const t=e,a=l([{label:"Array",value:"array"},{label:"String",value:"string"}]);return v((()=>t.config.messagePostFormat),(e=>{"array"!==e&&"string"!==e&&(t.config.messagePostFormat="array")})),(e,t)=>{const l=m("t-checkbox"),o=m("t-form-item"),n=m("t-input"),s=m("t-select"),u=m("t-form");return f(),i("div",null,[r(u,{labelAlign:"left"},{default:d((()=>[r(o,{label:"启用"},{default:d((()=>[r(l,{modelValue:e.config.enable,"onUpdate:modelValue":t[0]||(t[0]=t=>e.config.enable=t)},null,8,["modelValue"])])),_:1}),r(o,{label:"URL"},{default:d((()=>[r(n,{modelValue:e.config.url,"onUpdate:modelValue":t[1]||(t[1]=t=>e.config.url=t)},null,8,["modelValue"])])),_:1}),r(o,{label:"消息格式"},{default:d((()=>[r(s,{modelValue:e.config.messagePostFormat,"onUpdate:modelValue":t[2]||(t[2]=t=>e.config.messagePostFormat=t),options:a.value},null,8,["modelValue","options"])])),_:1}),r(o,{label:"报告自身消息"},{default:d((()=>[r(l,{modelValue:e.config.reportSelfMessage,"onUpdate:modelValue":t[3]||(t[3]=t=>e.config.reportSelfMessage=t)},null,8,["modelValue"])])),_:1}),r(o,{label:"Token"},{default:d((()=>[r(n,{modelValue:e.config.token,"onUpdate:modelValue":t[4]||(t[4]=t=>e.config.token=t)},null,8,["modelValue"])])),_:1}),r(o,{label:"调试模式"},{default:d((()=>[r(l,{modelValue:e.config.debug,"onUpdate:modelValue":t[5]||(t[5]=t=>e.config.debug=t)},null,8,["modelValue"])])),_:1}),r(o,{label:"心跳间隔"},{default:d((()=>[r(n,{modelValue:e.config.heartInterval,"onUpdate:modelValue":t[6]||(t[6]=t=>e.config.heartInterval=t),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])])),_:1})])),_:1})])}}});class ot{retCredential;apiPrefix;constructor(e,t="../api"){this.retCredential=e,this.apiPrefix=t}async GetOB11Config(){try{const e=await fetch(`${this.apiPrefix}/OB11Config/GetConfig`,{method:"POST",headers:{Authorization:"Bearer "+this.retCredential,"Content-Type":"application/json"}});if(200==e.status){const t=await e.json();if(0==t.code)return t?.data}}catch(e){console.error("Error getting OB11 config:",e)}return{}}async SetOB11Config(e){try{const t=await fetch(`${this.apiPrefix}/OB11Config/SetConfig`,{method:"POST",headers:{Authorization:"Bearer "+this.retCredential,"Content-Type":"application/json"},body:JSON.stringify({config:JSON.stringify(e)})});if(200==t.status&&0==(await t.json()).code)return!0}catch(t){console.error("Error setting OB11 config:",t)}return!1}async checkQQLoginStatus(){try{const e=await fetch(`${this.apiPrefix}/QQLogin/CheckLoginStatus`,{method:"POST",headers:{Authorization:"Bearer "+this.retCredential,"Content-Type":"application/json"}});if(200==e.status){const t=await e.json();if(0==t.code)return t.data.isLogin}}catch(e){console.error("Error checking QQ login status:",e)}return!1}async checkQQLoginStatusWithQrcode(){try{const e=await fetch(`${this.apiPrefix}/QQLogin/CheckLoginStatus`,{method:"POST",headers:{Authorization:"Bearer "+this.retCredential,"Content-Type":"application/json"}});if(200==e.status){const t=await e.json();if(0==t.code)return t.data}}catch(e){console.error("Error checking QQ login status:",e)}}async checkWebUiLogined(){try{const e=await fetch(`${this.apiPrefix}/auth/check`,{method:"POST",headers:{Authorization:"Bearer "+this.retCredential,"Content-Type":"application/json"}});if(200==e.status&&0==(await e.json()).code)return!0}catch(e){console.error("Error checking web UI login status:",e)}return!1}async loginWithToken(e){try{const t=await fetch(`${this.apiPrefix}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}),a=await t.json();if(0===a.code)return this.retCredential=a.data.Credential,this.retCredential}catch(t){console.error("Error logging in with token:",t)}return null}async getQQLoginQrcode(){try{const e=await fetch(`${this.apiPrefix}/QQLogin/GetQQLoginQrcode`,{method:"POST",headers:{Authorization:"Bearer "+this.retCredential,"Content-Type":"application/json"}});if(200==e.status){const t=await e.json();if(0==t.code)return t.data.qrcode||""}}catch(e){console.error("Error getting QQ login QR code:",e)}return""}async getQQQuickLoginList(){try{const e=await fetch(`${this.apiPrefix}/QQLogin/GetQuickLoginList`,{method:"POST",headers:{Authorization:"Bearer "+this.retCredential,"Content-Type":"application/json"}});if(200==e.status){const t=await e.json();if(0==t.code)return t.data||[]}}catch(e){console.error("Error getting QQ quick login list:",e)}return[]}async setQuickLogin(e){try{const t=await fetch(`${this.apiPrefix}/QQLogin/SetQuickLogin`,{method:"POST",headers:{Authorization:"Bearer "+this.retCredential,"Content-Type":"application/json"},body:JSON.stringify({uin:e})});if(200==t.status){const e=await t.json();return 0==e.code?{result:!0,errMsg:""}:{result:!1,errMsg:e.message}}}catch(t){console.error("Error setting quick login:",t)}return{result:!1,errMsg:"接口异常"}}}const nt={class:"setting-content"},it={key:0,class:"local-box"},st={class:"local"},rt={key:1,class:"local-box"},dt={class:"local"},ut={key:0,class:"token-view"},ct={key:1},mt=["onClick"],ft={slot:"body",class:"dialog-body"},gt=a({__name:"NetWork",setup(e){const t=l(!1),a=l(!0),p=l(0),v=l(0),_=l(0),V=l(0),S=window.matchMedia("(min-width: 768px) and (max-width: 1024px)"),C=window.matchMedia("(min-width: 1025px)"),U=l(null),L=l(null),P=l(!1),Q=l(!1),z=l({name:"",data:{},type:""}),O=l(""),q={httpServers:et,httpClients:tt,websocketServers:at,websocketClients:lt},A=l(""),B=l(0),R={websocketClients:[],websocketServers:[],httpClients:[],httpServers:[]},H=l(new Map([["all",[]],["httpServers",[]],["httpClients",[]],["websocketServers",[]],["websocketClients",[]]])),$={httpServers:"HTTP 服务器",httpClients:"HTTP 客户端",websocketServers:"WebSocket 服务器",websocketClients:"WebSocket 客户端"},G=l([]),D=e=>q[e],J=(e,t)=>Object.entries(e).find((([e,a])=>a===t))?.[0],K=e=>{G.value=H.value.get(e)},X=e=>{console.log(e),z.value.data=structuredClone(Ze[e])},Y=e=>{const t=H.value.get("all")?.findIndex((t=>t.name===e));return""===z.value.name||""===z.value.type?(N.error("请填写完整信息"),!1):-1===t||z.value.data.name===e||(N.error("名称已存在"),!1)},Z=async()=>{if("add"==A.value){if(!Y(z.value.name))return;z.value.data.name=z.value.name,R[z.value.type].push(z.value.data)}else if("edit"==A.value){if(!Y(z.value.name))return;z.value.data.name=z.value.name,R[z.value.type][B.value]=z.value.data}else"delete"==A.value&&R[z.value.type].splice(B.value,1);const e=await ee();e&&(e.network=R,await te(e)?(A.value="",B.value=0,N.success("配置保存成功"),await ae(),Q.value=!1):N.error("配置保存失败"))},ee=async()=>{const e=localStorage.getItem("auth");if(!e)return void console.error("No stored credential found");const t=new ot(e);return await t.GetOB11Config()},te=async e=>{const t=localStorage.getItem("auth");if(!t)return console.error("No stored credential found"),!1;const a=new ot(t);return await a.SetOB11Config(e)},ae=async()=>{try{const e=await ee();if(!e)return;const t=function(e,t=Ye){const a={...t};if(e.network){a.network={...t.network};for(const t in e.network){const l=e.network[t],o=Ze[t];Array.isArray(l)&&(a.network[t]=l.map((e=>Xe(o,e))))}}return void 0!==e.musicSignUrl&&(a.musicSignUrl=e.musicSignUrl),void 0!==e.enableLocalFile2Url&&(a.enableLocalFile2Url=e.enableLocalFile2Url),void 0!==e.parseMultMsg&&(a.parseMultMsg=e.parseMultMsg),a}(e);(e=>{G.value=[],H.value.set("all",[]);for(const t in e){const a=e[t];if(t in Ze){R[t]=[...a];const e=a.map((e=>({...e,type:$[t]})));H.value.set(t,e);const l=H.value.get("all");if(l){const t=[...l,...e];H.value.set("all",t)}G.value=H.value.get("all")}}})(t.network)}catch(e){console.error("Error loading config:",e)}},le=async e=>{const t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),await navigator.clipboard.writeText(e),document.body.removeChild(t),N.success("复制成功")},oe=()=>{p.value=window.innerWidth-41-v.value,S.matches?_.value=(p.value-20)/2:C.matches?_.value=(p.value-40)/3:_.value=p.value,P.value=!0,setTimeout((()=>{V.value=window.innerHeight-(U.value?.offsetHeight??0)-(L.value?.offsetHeight??0)-21}),300)};return Ie.on("sendWidth",(e=>{"number"!=typeof e||isNaN(e)||(v.value=e,oe())})),o((()=>{ae();const e=localStorage.getItem("menuWidth");e&&(v.value=parseInt(e),setTimeout((()=>{oe()}),300)),window.addEventListener("resize",oe)})),n((()=>{window.removeEventListener("resize",oe)})),(e,l)=>{const o=m("t-divider"),n=m("t-button"),v=m("t-tab-panel"),q=m("t-tabs"),N=m("t-popconfirm"),H=m("t-space"),Y=m("t-card"),ee=m("t-tag"),te=m("t-popup"),ae=m("t-descriptions-item"),oe=m("t-descriptions"),ne=m("t-collapse-panel"),ie=m("t-collapse"),se=m("t-empty"),re=m("t-input"),de=m("t-form-item"),ue=m("t-option"),ce=m("t-select"),me=m("t-form"),fe=m("t-dialog");return f(),i(c,null,[s("div",{ref_key:"headerBox",ref:U,class:"title"},[r(o,{content:"网络配置",align:"left"}),r(o,{align:"right"},{default:d((()=>[r(n,{onClick:l[0]||(l[0]=e=>(O.value="添加配置",z.value={name:"",data:{},type:""},A.value="add",void(Q.value=!0)))},{icon:d((()=>[r(g(M))])),default:d((()=>[l[6]||(l[6]=w(" 添加配置"))])),_:1})])),_:1})],512),P.value?(f(),i("div",{key:0,ref_key:"setting",ref:L,class:"setting"},[r(q,{ref:"tabsRef",style:x({width:p.value+"px"}),"default-value":"all",onChange:K},{default:d((()=>[r(v,{value:"all",label:"全部"}),r(v,{value:"httpServers",label:"HTTP 服务器"}),r(v,{value:"httpClients",label:"HTTP 客户端"}),r(v,{value:"websocketServers",label:"WebSocket 服务器"}),r(v,{value:"websocketClients",label:"WebSocket 客户端"})])),_:1},8,["style"])],512)):u("",!0),P.value?(f(),i("div",{key:1,class:"card-box",style:x({width:p.value+"px"})},[G.value.length>0?(f(),i("div",{key:0,class:"setting-box",style:x({maxHeight:V.value+"px"})},[(f(!0),i(c,null,y(G.value,((e,o)=>(f(),i("div",{key:o},[r(Y,{title:e.name,description:e.type,style:x({width:_.value+"px"}),"header-bordered":!0,class:"setting-card"},{actions:d((()=>[r(H,null,{default:d((()=>[r(g(j),{size:"20px",onClick:t=>(e=>{O.value="修改配置";const t=J($,e.type);t&&(z.value={name:e.name,data:e,type:t}),A.value="edit",B.value=R[z.value.type].findIndex((t=>t.name===e.name)),Q.value=!0})(e)},null,8,["onClick"]),r(N,{theme:"danger",content:"确认删除",onConfirm:t=>(e=>{const t=J($,e.type);t&&(z.value={name:e.name,data:e,type:t}),B.value=B.value=R[z.value.type].findIndex((t=>t.name===e.name)),A.value="delete",Z()})(e)},{default:d((()=>[r(g(T),{size:"20px"})])),_:2},1032,["onConfirm"])])),_:2},1024)])),default:d((()=>[s("div",nt,[r(Y,{class:"card-address",style:x({borderLeft:"7px solid "+(e.enable?"var(--td-success-color)":"var(--td-error-color)")})},{default:d((()=>[e.host&&e.port?(f(),i("div",it,[r(g(I),{class:"local-icon",size:"20px"}),s("strong",st,b(e.host)+":"+b(e.port),1),r(g(F),{class:"copy-icon",size:"20px",onClick:t=>le(e.host+":"+e.port)},null,8,["onClick"])])):u("",!0),e.url?(f(),i("div",rt,[r(g(I),{class:"local-icon",size:"20px"}),s("strong",dt,b(e.url),1),r(g(F),{class:"copy-icon",size:"20px",onClick:t=>le(e.url)},null,8,["onClick"])])):u("",!0)])),_:2},1032,["style"]),r(ie,{"default-value":[0],"expand-mutex":"",style:{"margin-top":"10px"},class:"info-coll"},{default:d((()=>[r(ne,{header:"基础信息"},{default:d((()=>[r(oe,{size:"small",layout:a.value?"vertical":"horizontal",class:"setting-base-info"},{default:d((()=>[e.token?(f(),h(ae,{key:0,label:"连接密钥"},{default:d((()=>[g(S).matches||g(C).matches?(f(),i("div",ut,[s("span",null,b(t.value?e.token:"******"),1),t.value?(f(),h(g(E),{key:0,class:"browse-icon",size:"18px",onClick:l[1]||(l[1]=e=>t.value=!1)})):(f(),h(g(W),{key:1,class:"browse-icon",size:"18px",onClick:l[2]||(l[2]=e=>t.value=!0)}))])):(f(),i("div",ct,[r(te,{showArrow:!0,trigger:"click"},{content:d((()=>[s("div",{onClick:t=>le(e.token)},b(e.token),9,mt)])),default:d((()=>[r(ee,{theme:"primary"},{default:d((()=>l[7]||(l[7]=[w("点击查看")]))),_:1})])),_:2},1024)]))])),_:2},1024)):u("",!0),r(ae,{label:"消息格式"},{default:d((()=>[w(b(e.messagePostFormat),1)])),_:2},1024)])),_:2},1032,["layout"])])),_:2},1024),r(ne,{header:"状态信息"},{default:d((()=>[r(oe,{size:"small",layout:a.value?"vertical":"horizontal",class:"setting-base-info"},{default:d((()=>[e.hasOwnProperty("debug")?(f(),h(ae,{key:0,label:"调试日志"},{default:d((()=>[r(ee,{class:"tag-item",theme:e.debug?"success":"danger"},{default:d((()=>[w(b(e.debug?"开启":"关闭"),1)])),_:2},1032,["theme"])])),_:2},1024)):u("",!0),e.hasOwnProperty("enableWebsocket")?(f(),h(ae,{key:1,label:"Websocket 功能"},{default:d((()=>[r(ee,{class:"tag-item",theme:e.enableWebsocket?"success":"danger"},{default:d((()=>[w(b(e.enableWebsocket?"启用":"禁用"),1)])),_:2},1032,["theme"])])),_:2},1024)):u("",!0),e.hasOwnProperty("enableCors")?(f(),h(ae,{key:2,label:"跨域放行"},{default:d((()=>[r(ee,{class:"tag-item",theme:e.enableCors?"success":"danger"},{default:d((()=>[w(b(e.enableCors?"开启":"关闭"),1)])),_:2},1032,["theme"])])),_:2},1024)):u("",!0),e.hasOwnProperty("enableForcePushEvent")?(f(),h(ae,{key:3,label:"上报自身消息"},{default:d((()=>[r(ee,{class:"tag-item",theme:e.reportSelfMessage?"success":"danger"},{default:d((()=>[w(b(e.reportSelfMessage?"开启":"关闭"),1)])),_:2},1032,["theme"])])),_:2},1024)):u("",!0),e.hasOwnProperty("enableForcePushEvent")?(f(),h(ae,{key:4,label:"强制推送事件"},{default:d((()=>[r(ee,{class:"tag-item",theme:e.enableForcePushEvent?"success":"danger"},{default:d((()=>[w(b(e.enableForcePushEvent?"开启":"关闭"),1)])),_:2},1032,["theme"])])),_:2},1024)):u("",!0)])),_:2},1032,["layout"])])),_:2},1024)])),_:2},1024)])])),_:2},1032,["title","description","style"])])))),128)),l[8]||(l[8]=s("div",{style:{height:"20vh"}},null,-1))],4)):(f(),h(Y,{key:1},{default:d((()=>[r(se,{class:"card-none",title:"暂无网络配置"})])),_:1}))],4)):u("",!0),r(fe,{visible:Q.value,"onUpdate:visible":l[5]||(l[5]=e=>Q.value=e),header:O.value,"destroy-on-close":!0,"show-in-attached-element":!0,placement:"center","on-confirm":Z,class:".t-dialog__ctx .t-dialog--defaul"},{default:d((()=>[s("div",ft,[r(me,{ref:"form",data:z.value,labelAlign:"left",model:z.value},{default:d((()=>[r(de,{style:{"text-align":"left"},rules:[{required:!0,message:"请输入名称",trigger:"blur"}],label:"名称",name:"name"},{default:d((()=>[r(re,{modelValue:z.value.name,"onUpdate:modelValue":l[3]||(l[3]=e=>z.value.name=e)},null,8,["modelValue"])])),_:1}),r(de,{style:{"text-align":"left"},rules:[{required:!0,message:"请选择类型",trigger:"change"}],label:"类型",name:"type"},{default:d((()=>[r(ce,{modelValue:z.value.type,"onUpdate:modelValue":l[4]||(l[4]=e=>z.value.type=e),onChange:X},{default:d((()=>[r(ue,{value:"httpServers"},{default:d((()=>l[9]||(l[9]=[w("HTTP 服务器")]))),_:1}),r(ue,{value:"httpClients"},{default:d((()=>l[10]||(l[10]=[w("HTTP 客户端")]))),_:1}),r(ue,{value:"websocketServers"},{default:d((()=>l[11]||(l[11]=[w("WebSocket 服务器")]))),_:1}),r(ue,{value:"websocketClients"},{default:d((()=>l[12]||(l[12]=[w("WebSocket 客户端")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),s("div",null,[(f(),h(k(k(D(z.value.type))),{config:z.value.data},null,8,["config"]))])])),_:1},8,["data","model"])])])),_:1},8,["visible","header"])],64)}}}),pt=Oe(gt,[["__scopeId","data-v-3aaf6eea"]]),vt={class:"login-container"},ht={class:"login-methods"},bt={id:"quick-login-dropdown",class:"login-form"},yt={id:"qrcode",class:"qrcode"},wt=a({__name:"QQLogin",setup(e){const t=O(),a=l("quick"),n=l([]),u=l(""),g=l(null),p=new ot(localStorage.getItem("auth")||"");let v=null,x="";const k=async e=>{const{result:a,errMsg:l}=await p.setQuickLogin(e);a?(v&&clearInterval(v),await N.success("登录成功即将跳转"),await t.push({path:"/dashboard/basic-info"})):await N.error("登录失败,"+l)},C=(e,t)=>{t?Pe.toCanvas(t,e,(function(e){e?console.error("Error generating QR Code:",e):console.log("QR Code generated!")})):console.error("Canvas element not found")},U=async()=>{const e=await p.checkQQLoginStatusWithQrcode();e?.isLogin?(v&&clearInterval(v),await N.success("登录成功即将跳转"),await t.push({path:"/dashboard/basic-info"})):e?.qrcodeurl&&x!==e.qrcodeurl&&(x=e.qrcodeurl,C(x,g.value))};return o((()=>{(async()=>{n.value=await p.getQQQuickLoginList(),x=await p.getQQLoginQrcode(),C(x,g.value),v=window.setInterval(U,3e3)})()})),(e,t)=>{const l=m("t-button"),o=m("t-tooltip"),p=m("t-option"),v=m("t-select"),x=m("t-footer"),C=m("t-card");return f(),h(C,{class:"layout"},{default:d((()=>[s("div",vt,[t[5]||(t[5]=s("h2",{class:"sotheby-font"},"QQ Login",-1)),s("div",ht,[r(o,{content:"快速登录"},{default:d((()=>[r(l,{id:"quick-login",class:_(["login-method",{active:"quick"===a.value}]),onClick:t[0]||(t[0]=e=>a.value="quick")},{default:d((()=>t[3]||(t[3]=[w("Quick Login")]))),_:1},8,["class"])])),_:1}),r(o,{content:"二维码登录"},{default:d((()=>[r(l,{id:"qrcode-login",class:_(["login-method",{active:"qrcode"===a.value}]),onClick:t[1]||(t[1]=e=>a.value="qrcode")},{default:d((()=>t[4]||(t[4]=[w("QR Code")]))),_:1},8,["class"])])),_:1})]),V(s("div",bt,[r(v,{id:"quick-login-select",modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=e=>u.value=e),placeholder:"Select Account",onChange:k},{default:d((()=>[(f(!0),i(c,null,y(n.value,(e=>(f(),h(p,{key:e,value:e},{default:d((()=>[w(b(e),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])],512),[[S,"quick"===a.value]]),V(s("div",yt,[s("canvas",{ref_key:"qrcodeCanvas",ref:g},null,512)],512),[[S,"qrcode"===a.value]])]),r(x,{class:"footer"},{default:d((()=>t[6]||(t[6]=[w("Power By NapCat.WebUi")]))),_:1})])),_:1})}}}),xt=Oe(wt,[["__scopeId","data-v-edab2663"]]),kt={class:"login-container"},_t=a({__name:"WebUiLogin",setup(e){const t=O(),a=C({token:""}),l=e=>{N.error(e)},n=async()=>{const e=localStorage.getItem("auth");if(!e)return;const a=new ot(e),l=await a.checkWebUiLogined();console.log("isWenUiLoggedIn",l),l&&(await a.checkQQLoginStatus()?await t.push({path:"/dashboard/basic-info"}):await t.push({path:"/qqlogin"}))},i=async e=>{const t=new ot(""),a=await t.loginWithToken(e);a?await(async e=>{localStorage.setItem("auth",e),await n()})(a):l("登录失败，请检查Token")};o((()=>{const e=new URL(window.location.href).searchParams.get("token");e&&i(e),n()}));const u=async({validateResult:e})=>{e?await i(a.token):l("请填写Token")};return(e,t)=>{const l=m("t-input"),o=m("t-form-item"),n=m("t-button"),i=m("t-form"),c=m("t-footer"),p=m("t-card");return f(),h(p,{class:"layout"},{default:d((()=>[s("div",kt,[t[2]||(t[2]=s("h2",{class:"sotheby-font"},"WebUi Login",-1)),r(i,{ref:"form",data:a,colon:"","label-width":0,onSubmit:u},{default:d((()=>[r(o,{name:"password"},{default:d((()=>[r(l,{modelValue:a.token,"onUpdate:modelValue":t[0]||(t[0]=e=>a.token=e),type:"password",clearable:"",placeholder:"请输入Token"},{"prefix-icon":d((()=>[r(g(z))])),_:1},8,["modelValue"])])),_:1}),r(o,null,{default:d((()=>[r(n,{theme:"primary",type:"submit",block:""},{default:d((()=>t[1]||(t[1]=[w("登录")]))),_:1})])),_:1})])),_:1},8,["data"])]),r(c,{class:"footer"},{default:d((()=>t[3]||(t[3]=[w("Power By NapCat.WebUi")]))),_:1})])),_:1})}}}),Vt={class:"title"},St={class:"other-config-container"},Ct={class:"other-config"},Ut={class:"button-container"},Lt=[{path:"/",redirect:"/webui"},{path:"/webui",component:Oe(_t,[["__scopeId","data-v-ae44d02f"]]),name:"WebUiLogin"},{path:"/qqlogin",component:xt,name:"QQLogin"},{path:"/dashboard",component:Ae,children:[{path:"",redirect:"basic-info"},{path:"basic-info",component:Ne,name:"BasicInfo"},{path:"network-config",component:pt,name:"NetWork"},{path:"log-view",component:Ke,name:"LogView"},{path:"other-config",component:Oe(a({__name:"OtherConfig",setup(e){const t=l({musicSignUrl:"",enableLocalFile2Url:!1,parseMultMsg:!0}),a=l(),n=async()=>{const e=localStorage.getItem("auth");if(!e)return void console.error("No stored credential found");const t=new ot(e);return await t.GetOB11Config()},u=async()=>{try{const e=await n();e&&(e.musicSignUrl=t.value.musicSignUrl||"",e.enableLocalFile2Url=t.value.enableLocalFile2Url??!1,e.parseMultMsg=t.value.parseMultMsg??!0,await(async e=>{const t=localStorage.getItem("auth");if(!t)return console.error("No stored credential found"),!1;const a=new ot(t);return await a.SetOB11Config(e)})(e)?N.success("配置保存成功"):N.error("配置保存失败"))}catch(e){console.error("Error saving config:",e),N.error("配置保存失败")}};return o((()=>{(async()=>{try{const e=await n();e&&(t.value.musicSignUrl=e.musicSignUrl,t.value.enableLocalFile2Url=e.enableLocalFile2Url,t.value.parseMultMsg=e.parseMultMsg)}catch(e){console.error("Error loading config:",e)}})();const e=window.matchMedia("(max-width: 768px)"),l=e=>{e.matches?a.value="top":a.value="left"};e.addEventListener("change",l);const o=new Event("change");return Object.defineProperty(o,"matches",{value:e.matches,writable:!1}),e.dispatchEvent(o),()=>{e.removeEventListener("change",l)}})),(e,l)=>{const o=m("t-divider"),n=m("t-input"),g=m("t-form-item"),p=m("t-switch"),v=m("t-form"),h=m("t-button"),b=m("t-card");return f(),i(c,null,[s("div",Vt,[r(o,{content:"其余配置",align:"left"})]),r(b,{class:"card"},{default:d((()=>[s("div",St,[s("div",Ct,[r(v,{ref:"form",model:t.value,"label-align":a.value,"label-width":"auto",colon:""},{default:d((()=>[r(g,{label:"音乐签名地址",name:"musicSignUrl",class:"form-item"},{default:d((()=>[r(n,{modelValue:t.value.musicSignUrl,"onUpdate:modelValue":l[0]||(l[0]=e=>t.value.musicSignUrl=e)},null,8,["modelValue"])])),_:1}),r(g,{label:"启用本地文件到URL",name:"enableLocalFile2Url",class:"form-item"},{default:d((()=>[r(p,{modelValue:t.value.enableLocalFile2Url,"onUpdate:modelValue":l[1]||(l[1]=e=>t.value.enableLocalFile2Url=e)},null,8,["modelValue"])])),_:1}),r(g,{label:"启用上报解析合并消息",name:"parseMultMsg",class:"form-item"},{default:d((()=>[r(p,{modelValue:t.value.parseMultMsg,"onUpdate:modelValue":l[2]||(l[2]=e=>t.value.parseMultMsg=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","label-align"]),s("div",Ut,[r(h,{onClick:u},{default:d((()=>l[3]||(l[3]=[w("保存")]))),_:1})])])])])),_:1})],64)}}}),[["__scopeId","data-v-4c7ed5f7"]]),name:"OtherConfig"},{path:"about-us",component:De,name:"AboutUs"}]}],Pt=q({history:A(),routes:Lt}),Qt=U(je);Qt.use(Pt),Qt.use(R),Qt.use(H),Qt.use($),Qt.use(G),Qt.use(D),Qt.use(J),Qt.use(K),Qt.use(X),Qt.use(Y),Qt.use(Z),Qt.use(ee),Qt.use(te),Qt.use(ae),Qt.use(le),Qt.use(oe),Qt.use(ne),Qt.use(ie),Qt.use(se),Qt.use(re),Qt.use(de),Qt.use(ue),Qt.use(ce),Qt.use(me),Qt.use(fe),Qt.use(ge),Qt.use(pe),Qt.use(ve),Qt.use(he),Qt.use(be),Qt.use(ye),Qt.use(we),Qt.use(xe),Qt.use(ke),Qt.use(_e),Qt.use(Ve),Qt.use(Se),Qt.use(Ce),Qt.use(Ue),Qt.use(Le),Qt.mount("#app")}}}));
